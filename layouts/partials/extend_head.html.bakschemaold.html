<!-- 基础SEO -->
<meta name="description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta name="keywords" content="{{ if .Params.keywords }}{{ delimit .Params.keywords ", " }}{{ else }}GEO优化, AI搜索, 生成式引擎优化, ChatGPT SEO{{ end }}">
<meta name="author" content="{{ .Site.Params.author | default "AioGeoLab" }}">
<link rel="canonical" href="{{ .Permalink }}">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:title" content="{{ .Title }} | {{ .Site.Title }}">
<meta property="og:description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:locale" content="zh_CN">
{{ with .Params.cover.image }}
<meta property="og:image" content="{{ . | absURL }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
{{ end }}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="{{ .Permalink }}">
<meta name="twitter:title" content="{{ .Title }}">
<meta name="twitter:description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
{{ with .Params.cover.image }}
<meta name="twitter:image" content="{{ . | absURL }}">
{{ end }}

<!-- 文章结构化数据 -->
{{ if .IsPage }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ .Title }}",
  "description": "{{ .Description }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author | default "AioGeoLab" }}"
  },
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  {{ with .Params.cover.image }}
  "image": {
    "@type": "ImageObject",
    "url": "{{ . | absURL }}",
    "width": 1200,
    "height": 630
  },
  {{ end }}
  "url": "{{ .Permalink }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ .Site.Title }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ .Site.BaseURL }}logo.png"
    }
  },
  "keywords": "{{ if .Params.keywords }}{{ delimit .Params.keywords ", " }}{{ end }}",
  "articleSection": "{{ with .Section }}{{ . }}{{ end }}",
  "inLanguage": "zh-CN"
}
</script>
{{ end }}

<!-- 网站结构化数据 -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ .Site.Title }}",
  "url": "{{ .Site.BaseURL }}",
  "description": "{{ .Site.Params.description }}",
  "inLanguage": "zh-CN",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author | default "AioGeoLab" }}"
  }
}
</script>


{{- /* Schema.org JSON-LD for SEO */ -}}
{{- /*  
{{- if .IsPage -}}
  {{- partial "schema-article.html" . -}}
{{- else if .IsHome -}}
  {{- partial "schema-website.html" . -}}
{{- end -}}
*/ -}}

<!-- Google Analytics 4 - 延迟加载 -->
{{ if hugo.IsProduction }}
{{ with site.Config.Services.GoogleAnalytics.ID }}
<script>
  // 延迟加载GA，不阻塞页面渲染
  window.addEventListener('load', function() {
    var script = document.createElement('script');
    script.async = true;
    script.src = 'https://www.googletagmanager.com/gtag/js?id={{ . }}';
    document.head.appendChild(script);
    
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '{{ . }}');
  });
</script>
{{ end }}
{{ end }}




<!-- Umami Analytics - 轻量级 < 2KB -->
{{ if hugo.IsProduction }}
<script defer 
  src="https://cloud.umami.is/script.js" 
  data-website-id="c8d2832d-8a60-478a-9a69-dfdabba8e410">
</script>
{{ end }}

